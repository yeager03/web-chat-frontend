@import "../../../../assets/scss/components/variables";

:global {
	.ant-popover-inner {
		box-shadow: 0 5px 5px rgba(0, 0, 0, 0.07) !important;
		// background-color: $blue !important;
	}
}

.message {
	display: flex;
	align-items: center;

	&:not(:last-child) {
		margin-bottom: 20px;
	}

	$self: &;

	&_my-message {
		flex-direction: row-reverse;

		#{$self}__avatar {
			margin-left: 15px;
		}

		#{$self}__content {
			cursor: pointer;
		}

		#{$self}__bubble {
			align-self: flex-end;

			background: $white;
			box-shadow: 0 5px 5px rgba(0, 0, 0, 0.07);
			border-radius: 15px 15px 0 15px;
		}

		#{$self}__text {
			color: $black;
		}

		#{$self}__date {
			text-align: right;
		}

		#{$self}__checked-icon {
			position: absolute;
			bottom: 7px;
			left: -20px;
		}

		#{$self}__attachments {
			align-self: flex-end;
		}
	}

	&_typing {
		#{$self}__bubble {
			background: $message-typing;
		}
	}

	&_image {
		#{$self}__attachments {
			.attachment-item {
				width: 100px;
				height: 100px;
			}
		}
	}

	&_audio {
		#{$self}__bubble {
			position: relative;
			width: 280px;
			overflow: hidden;
		}
	}

	&__popover {
		padding: 12px;

		display: flex;
		justify-content: center;
		align-items: center;

		.popover__icon {
			cursor: pointer;
			font-size: 18px;

			&:not(:last-child) {
				margin-right: 10px;
			}
		}
	}

	&__avatar {
		flex-shrink: 0;
		align-self: flex-end;
		margin-right: 15px;
		margin-bottom: 7px;

		width: 35px;
		height: 35px;

		img {
			border-radius: 50%;
			width: 100%;
			height: 100%;
		}
	}

	&__content {
		max-width: 540px;
		position: relative;

		display: flex;
		flex-direction: column;
	}

	&__bubble {
		max-width: 100%;

		align-self: flex-start;

		background: $blue;
		box-shadow: 0 5px 5px rgba(54, 116, 255, 0.197);
		border-radius: 15px 15px 15px 0;
		padding: 15px;

		margin-bottom: 7px;
	}

	&__text {
		font-weight: 500;
		color: $white;
		line-height: 20px;
		word-wrap: break-word;

		b {
			font-size: 12px;
			opacity: 0.7;
			font-weight: 500;
		}
	}

	&__attachments {
		align-self: flex-start;
		margin-bottom: 7px;

		.attachments-items {
			display: flex;
			align-items: center;
		}

		.attachment-item {
			list-style-type: none;
			cursor: pointer;
			width: 35px;
			height: 35px;

			&:not(:last-child) {
				margin-right: 5px;
			}

			img {
				width: 100%;
				height: 100%;
				border-radius: 5px;
			}
		}
	}

	&__date {
		display: inline-block;
		font-size: 12px;
		opacity: 0.5;
		text-align: left;
	}

	&__typing {
		span {
			height: 8px;
			width: 8px;
			border-radius: 50%;
			background: $message-typing-circle;
			display: inline-block;
			margin-right: 8px;
			animation: 0.8s typingAnimation infinite ease-out 0.1s;

			&:nth-of-type(2) {
				animation: 0.8s typingAnimation infinite ease-out 0.2s;
			}
			&:nth-of-type(3) {
				animation: 0.8s typingAnimation infinite ease-out 0.3s;
				margin-right: 0;
			}
		}
	}
}

@keyframes typingAnimation {
	from {
		opacity: 0.2;
		transform: translateY(0px);
	}
	50% {
		opacity: 0.5;
		transform: translateY(-1.5px);
	}
	to {
		opacity: 1;
		transform: translateY(-1px);
	}
}
